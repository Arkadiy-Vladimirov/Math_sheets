\subsubsection{Группоид}
    Обсудим сперва структуру группоида общего вида\footnote{здесь и далее под 
    группоидами подразумеваются связные группоиды}
    \begin{definition}\cite{MacLane}
        \emph{Группоидом} назывется категория, в которой любая стрелка обратима.
    \end{definition}

    Для этого введем операцию произведения множеств стрелок, корректную тогда и 
    только тогда, когда все упорядоченные пары стрелок взятые из 
    соответствующих множеств перемножаемы, итак
    \begin{equation}\label{cdot_def}
        A \cdot B \doteqdot \{f\circ g \:|\: \forall f \in A, \forall g \in B\},
    \end{equation}
    в частности, если $A$ --- одноэлементное множество, имеем
    \[f \cdot B \doteqdot \{f\circ h \:|\: \forall g \in B\}.\]

    Теперь упомянем пару утверждений, справдливых для любого группоида.

    \bigskip

    Общеизвестно, что в группоиде все группы петель изоморфны, иначе говоря 
    верно
    \begin{statement}\label{st_loop_iso}
        Для любых $a$, $b$ $\in \Obj(\Gamma)$
        \begin{equation}
            \hom(b,b) = h\hom(a,a)h^{-1},
        \end{equation}
        где $h$ --- произвольная стрелка из $a$ в $b$.
    \end{statement}

    \bigskip

    Также имеет место
    \begin{statement}\label{st_gr_shift}
        Для любых различных вершин $a$, $b$ $\in \Obj(\Gamma)$ справедливо
        \begin{equation}\label{eq_fhom}
            \hom(a,b) = f \cdot \hom(a,a),
        \end{equation}
        где $f$ --- произвольная стрелка из $a$ в $b$.
    \end{statement}
    \begin{proof}
        Вложение правого множества в левое справедливо в силу аксиом 
        композиции в категории.
    
        Обратное вложение имеет место, так как для любого $g \in \hom(a,b)$ 
        найдется $h \in \hom(a,a)$ такое, что $g = fh$, а именно $h = f^{-1}h$.
    \end{proof}

    \begin{corollary}
        Пользуясь утверждениями \ref{st_loop_iso}, \ref{st_gr_shift} или 
        непосредственно, несложно доказать, что:
        \begin{gather*}
            \hom(a,b) = \hom(b,b) \cdot f,\quad f:a\to b\\
            \hom(a,b) \cdot \hom(a,a) = \hom(b,b) \cdot \hom(a,b) = \hom(a,b),\\
            \hom(b,c) \cdot \hom(a,b) = \hom(a,c). 
        \end{gather*}
    \end{corollary}

    \bigskip

    Утверждения \ref{st_loop_iso}, \ref{st_gr_shift} и их следствия позволяют 
    заключить, что по заданному группоиду можно построить категорию, с тем же 
    набором вершин и стрелками вида $\hom(a,b) : a \to b$, которая также 
    является группоидом, иначе говоря можно ввести следующее

    \begin{definition}
        Пусть $G = \Fund \Gamma$ --- фундаментальная группа группоида. 
        \emph{Фактор-группоидом} или \emph{факторизацией группоида $\Gamma$ по 
        фундаментальной группе}\footnote{в действительности можно вводить 
        факторизацию группоида по любой нормальной подгруппе фунадментальной 
        группы} 
        называется группоид $\Gamma/G$ такой, что 
        \begin{gather*}
            \Obj \Gamma/G = \Obj \Gamma,\\
            \Arr \Gamma/G = \{\hom(a,b) : a \to b \:|\: \forall a,b \in \Obj (\Gamma)\}.
        \end{gather*}
    \end{definition}

    Подобно каноническому гомоморфизму отоброжающему группу в фактор-группу, 
    можно опрделить \emph{канонический функтор} $\epsilon$ переводящий $\Gamma$ 
    в $\Gamma/G$, а именно $\epsilon : a \mapsto a$, 
    $\epsilon : (f: a \to b) \mapsto (\hom(a,b) = \epsilon(f) : a \to b)$.
    
    \bigskip

    Удобнее однако, зафиксировать некоторую вершину $a$ группоида $\Gamma$, ее 
    группу петель $\hom(a,a) = A$, и \emph{веер стрелок}
    \footnote{\textbf{Определение.} \emph{Веером стрелок} вершины 
    $a$ группоида $\Gamma$ называется множество состоящее из стрелок исходящих 
    из вершины $a$ по одной в каждую из прочих.}
     $f,g,\ldots$ Тогда, в силу утверждений \ref{st_loop_iso}, 
    \ref{st_gr_shift} стрелки группоида $\Gamma /G$ имеют вид $fA$, $fAf^{-1}$, 
    $gA,\ldots$, и отображение, осуществляемое функтором $\epsilon$ приобретает 
    вид:

    \begin{figure}[h]
        \centering
        \[\xymatrix{
            b \ar@(u,l)[]_{\textstyle{\id_b}}\ar@{-->}[ddrr]^{\textstyle{h=g \circ f^{-1}}}     & &   &                                                     & b \ar@(u,l)[]_{\textstyle{fAf^{-1}}} \ar@{-->}[ddrr]^{\textstyle{g A f^{-1}}}     & &  \\
                                                                                                & &   & \stackrel{\textstyle{\epsilon}}{\longrightarrow}    &                                                                                   & &  \\
            a \ar@(l,d)[]_{\textstyle{\id_a}} \ar[uu]^{\textstyle{f}} \ar[rr]_{\textstyle{g}}   & & c &                                                     & a \ar@(l,d)[]_{\textstyle{A}} \ar[uu]^{\textstyle{fA}} \ar[rr]_{\textstyle{gA}}   & & c
        }\]
        \caption{канонический функтор}
        \label{cd_can_func}
    \end{figure}

    Пусть читателя не смущает произвол в выборе вершины $a$ и веера стрелок, ибо 
    вне зависимости от него стрелки вида $fA : a \to b$ все равны $\hom(a,b)$ как множества. 
    Преимущество такой записи состоит в ее наглядности и удобстве полученной 
    "<алгебры"> операций в фактор-группоиде. Выведем эти операции, пользуясь 
    утверждениями 
    \ref{st_loop_iso},\ref{st_gr_shift}, их следствиями и введенной операцией
    \ref{cdot_def} перемножения множеств стрелок:

    \emph{обращение стрелки} $fA : a \to b$ :
    \[(fA)^{-1} =  f^{-1} \hom(b,b) = f^{-1} fAf^{-1} = Af^{-1} : b \to a;\]

    \emph{композиция стрелок} $Ah : b \to a$ и $gA : a \to c$ :
    \[gA \cdot Ah = gAh : b \to c.\]

    Так, ясно, как получена стрелка $gAf^{-1}$ на рис.~\ref{cd_can_func}:
    \[gA \cdot (fA)^{-1} = gA \cdot Af^{-1} = gAf^{-1}.\]

    Заметим, что в полученном группоиде $\epsilon(\Gamma)$ любая стрелка 
    $a \to b$ представлена в единственном экземпляре (и равна $\hom(a,b)$), 
    группоиды подобного вида назовем \emph{элементарными}.
